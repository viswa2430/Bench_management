{% extends "base.html" %}
{% block content %}

<div class="card">
  <h2>Open Roles</h2>

  <form method="post">
    <label>Role Name:</label>
    <input type="text" name="role_name" required>

    <label>Required Skills (comma separated):</label>
    <input type="text" name="skills" required>

    <button type="submit">Add Role</button>
  </form>
</div>

{% for role in roles %}
<div class="match-block">
  <h3>{{ role.role_name }}</h3>
  <p><strong>Required Skills:</strong> {{ role.skills | join(", ") }}</p>

  <h4>Top Matches:</h4>

  <ul class="match-list">
    {% for c in matches[role.role_name] %}
    <li class="match-card">
      <strong>{{ c.name }}</strong><br>
      Skills: {{ c.skills | join(", ") }}<br>
      Score: {{ c.score }}
    </li>
    {% endfor %}
  </ul>
</div>
{% endfor %}

{% endblock %}
{% for role in roles %}
<div class="match-block">
  <h3>{{ role.role_name }} (Skills: {{ role.skills | join(', ') }})</h3>
  <p>Top Matches:</p>
  <ul class="match-list">
    {% for c in matches[role.role_name] %}
    <li data-score="{{ c.score }}">
      {{ c.name }} - Skills: {{ c.skills | join(', ') }} (Score: {{ c.score }})
      {% if session.get('user_type') == 'recruiter' %}
      <form method="post" action="{{ url_for('assign_consultant', role_name=role.role_name, consultant_name=c.name) }}"
        style="display:inline;">
        <button type="submit" class="btn-small">Recruit</button>
      </form>
      {% endif %}
    </li>
    {% endfor %}
  </ul>
</div>
{% endfor %}